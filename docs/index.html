<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-22-23-prct09-funko-app-juancarlosrey</title><meta name="description" content="Documentation for ull-esit-inf-dsi-22-23-prct09-funko-app-juancarlosrey"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-22-23-prct09-funko-app-juancarlosrey</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>ull-esit-inf-dsi-22-23-prct09-funko-app-juancarlosrey</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#práctica-9---aplicación-de-registro-de-funko-pops" id="práctica-9---aplicación-de-registro-de-funko-pops" style="color: inherit; text-decoration: none;">
  <h1>Práctica 9 - Aplicación de registro de Funko Pops</h1>
</a>

<a href="#realizado-por-juan-carlos-rey-medina-alu0101410869" id="realizado-por-juan-carlos-rey-medina-alu0101410869" style="color: inherit; text-decoration: none;">
  <h4>Realizado por: Juan Carlos Rey Medina (alu0101410869)</h4>
</a>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey/actions/workflows/tests.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey/actions/workflows/tests.yml/badge.svg?branch=main" alt="P9 - Tests"></a><a href="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey/actions/workflows/coveralls.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey/actions/workflows/coveralls.yml/badge.svg?branch=main" alt="P9 - Coveralls"></a><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey/badge.svg?branch=main" alt="Coverage Status"></a><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2223_ull-esit-inf-dsi-22-23-prct09-funko-app-JuanCarlosRey&metric=alert_status" alt="Quality Gate Status"></a></p>

<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
  <h2>Introducción</h2>
</a>
<p>En esta novena práctica de la asignatura se nos ha pedido realizar una implementación de una aplicación que permita almacenar información de los Funko Pops pertenecientes a la colección de un usuario. En concreto, se pide crear un sistema que permita añadir, modificar, eliminar, listar y leer la información asociada a un Funko.</p>

<a href="#pasos-previos" id="pasos-previos" style="color: inherit; text-decoration: none;">
  <h2>Pasos previos</h2>
</a>
<p>Antes de realizar el ejercicio solicitado, primero se ha realizado una serie de pasos previos a modo de preparación para la práctica:</p>
<ul>
<li>Realizar la <a href="https://ull-esit-inf-dsi-2223.github.io/typescript-theory/typescript-project-setup.html">configuración incial del proyecto TypeScript</a>.</li>
<li>Instalar <a href="https://typedoc.org">Typedoc</a> para la generación de documentación.</li>
<li>Instalar <a href="https://mochajs.org">Mocha</a> y <a href="https://www.chaijs.com">Chai</a> para la realización de tests unitarios.</li>
<li>Instalar <a href="https://istanbul.js.org">Istanbul</a> y <a href="https://coveralls.io">Coveralls</a> para el cubrimiento del código.</li>
<li>Activar las <a href="https://docs.github.com/en/actions"><strong>GitHub Actions</strong></a> tanto para las <a href="https://drive.google.com/file/d/1hwtPovQlGvthaE7e7yYshC4v8rOtLSw0/view?usp=sharing">pruebas</a> como para el <a href="https://drive.google.com/file/d/1yOonmpVbOyvzx3ZbXMQTAPxvA3a7AE7w/view?usp=sharing">cubrimiento</a> y la calidad de códgio (<a href="https://sonarcloud.io/projects">Sonar Cloud</a>).</li>
<li>Instalar los paquetes <a href="https://www.npmjs.com/package/chalk">Chalk</a> para imprimir en color, <a href="https://www.npmjs.com/package/yargs">Yargs</a> para ejecutar la app mediante comandos y parámetros, y la <a href="https://nodejs.org/docs/latest-v19.x/api/fs.html">API sincrona de Node.js</a> para la persistencia de los datos de la app.</li>
</ul>

<a href="#ejercicios" id="ejercicios" style="color: inherit; text-decoration: none;">
  <h2>Ejercicios</h2>
</a>
<p>A continuación se describirán las soluciones realizadas para resolver el problema planteado y su justificación:</p>

<a href="#diseño-de-clases-e-interfaces" id="diseño-de-clases-e-interfaces" style="color: inherit; text-decoration: none;">
  <h3>Diseño de clases e interfaces</h3>
</a>
<p>En cuanto al diseño de clases e interfaces, se ha optado por diseñar las tres siguientes clases:</p>
<ul>
<li>Clase <code>Funko</code> que representa a un Funko pop. El propósito de esta clase es el de almacenar toda la información representativa de un funko. Evidentemente, para cada uno de los atributos se ha diseñado un getter. Para el parámetro del tipo se ha optado por realizar un enumerado <code>Types</code> con el propósito de facilitar la tarea de obtener y registrar datos más adelante.:</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Types</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">Pop</span><span class="hl-1"> = </span><span class="hl-5">&quot;Pop!&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">PopRides</span><span class="hl-1"> = </span><span class="hl-5">&quot;Pop! Rides&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">Soda</span><span class="hl-1"> = </span><span class="hl-5">&quot;Vynil Soda&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">Gold</span><span class="hl-1"> = </span><span class="hl-5">&quot;Vynil Gold&quot;</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><p>Clase <code>User</code> que representa a un usuario del sistema. El propósito de esta clase es el de almacenar toda la información representativa de un usuario, incluyendo su colección de funkos. Para esta clase se ha decidido no implementar las operaciones que trabajen con la colección, ya que así la complejidad de esta es mucho menor y además, se logra respetar el principio de <code>Singe Responsibility</code> de SOLID. Por ende, solo se han implementado los getters de los atributos.</p>
</li>
<li><p>Clase <code>OperableUser</code> que extiende a la clase <code>User</code> anteriormente mencionada y cuyo propósito es de proporcionar al usuario las funcionalidades necesarias para realizar operaciones sobre su colección de funkos. Para ello se han definido los métodos <code>addFunko()</code>, <code>removeFunko()</code>, <code>modifyFunko()</code>, <code>listFunko()</code> y <code>showFunkoInfo()</code>, siendo que en los dos últimos se ha utilizado el paquete <code>chalk</code> para imprimir el valor de los funkos con un color dependiendo del rango ubicado:</p>
</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">funkoCollection</span><span class="hl-1">[</span><span class="hl-6">index</span><span class="hl-1">].</span><span class="hl-6">value</span><span class="hl-1"> &lt; </span><span class="hl-7">20</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-5">&quot;Valor: &quot;</span><span class="hl-1"> + </span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-2">this</span><span class="hl-9">.</span><span class="hl-6">funkoCollection</span><span class="hl-9">[</span><span class="hl-6">index</span><span class="hl-9">].</span><span class="hl-6">value</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">))</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">funkoCollection</span><span class="hl-1">[</span><span class="hl-6">index</span><span class="hl-1">].</span><span class="hl-6">value</span><span class="hl-1"> &lt; </span><span class="hl-7">50</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-5">&quot;Valor: &quot;</span><span class="hl-1"> + </span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">magenta</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-2">this</span><span class="hl-9">.</span><span class="hl-6">funkoCollection</span><span class="hl-9">[</span><span class="hl-6">index</span><span class="hl-9">].</span><span class="hl-6">value</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">))</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">funkoCollection</span><span class="hl-1">[</span><span class="hl-6">index</span><span class="hl-1">].</span><span class="hl-6">value</span><span class="hl-1"> &lt; </span><span class="hl-7">200</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-5">&quot;Valor: &quot;</span><span class="hl-1"> + </span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">yellow</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-2">this</span><span class="hl-9">.</span><span class="hl-6">funkoCollection</span><span class="hl-9">[</span><span class="hl-6">index</span><span class="hl-9">].</span><span class="hl-6">value</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">))</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-5">&quot;Valor: &quot;</span><span class="hl-1"> + </span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">green</span><span class="hl-1">(</span><span class="hl-5">`</span><span class="hl-2">${</span><span class="hl-2">this</span><span class="hl-9">.</span><span class="hl-6">funkoCollection</span><span class="hl-9">[</span><span class="hl-6">index</span><span class="hl-9">].</span><span class="hl-6">value</span><span class="hl-2">}</span><span class="hl-5">`</span><span class="hl-1">))</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Una de las cuestiones que se ha tenido a la hora de realizar el diseño de clases es el de hacer la clase <code>User</code> como <strong>clase abstracta</strong>, definiendo los métodos que realizan acciones sobre la colección como <strong>métodos abstractos</strong> y siendo implementados en la clase <code>OperableUser</code>, sin embargo, como solo se hereda a una única clase hija, no nos ha parecido necesario realizar dicho diseño.</p>

<a href="#programa-main" id="programa-main" style="color: inherit; text-decoration: none;">
  <h3>Programa <em>main</em></h3>
</a>
<p>Para realizar la aplicación se ha creado el fichero <code>funko_app.ts</code>, que utiliza tanto la <strong>API síncrona de Node.js</strong> como el paquete <strong>yargs</strong>.</p>
<p>Para el almacenamiento de la información se creó la carpeta <code>./data</code> en donde, cada directorio dentro de esta, corresponde a la lista de funkos del usuario con el mismo nombre que el directorio. Dentro de cada carpeta, la información de los funkos se guarda en un fichero .json independiente para cada funko, siendo el nombre de cada fichero nombrados el id correspondiente del funko:</p>
<pre><code><span class="hl-6">data</span><span class="hl-1">/</span><br/><span class="hl-1">├── </span><span class="hl-6">gonzalo</span><br/><span class="hl-1">│   ├── 1.</span><span class="hl-6">json</span><br/><span class="hl-1">│   └── 2.</span><span class="hl-6">json</span><br/><span class="hl-1">└── </span><span class="hl-6">juancarlos</span><br/><span class="hl-1">    ├── 0.</span><span class="hl-6">json</span><br/><span class="hl-1">    ├── 1.</span><span class="hl-6">json</span><br/><span class="hl-1">    └── 2.</span><span class="hl-6">json</span>
</code></pre>
<p>En primer lugar se ha creado las dos siguientes funciones, ambas utilizando la API:</p>
<ul>
<li>Función <code>databaseLoad()</code> que se encarga de cargar toda la información de la base de datos en el sistema. Para ello se abre el directorio <code>./data</code>, donde se almacena toda la lista de usuarios y sus funkos. Después, para cada carpeta correspondiente a un usuario se leen todos los ficheros .json, leyendo la información de cada uno de los atributos de los funkos y almacenándola en un nuevo objeto de tipo <code>Funko</code>. Posteriormente se añade el funko a la colección del usuario y se repite hasta leer todos los funkos del directorio:</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-8">databaseLoad</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-6">id</span><span class="hl-1"> = </span><span class="hl-7">0</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">readdirSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data&quot;</span><span class="hl-1">).</span><span class="hl-8">forEach</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-10">// Guardamos la información base del usuario y asignamos una nueva id</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">newUser</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">OperableUser</span><span class="hl-1">(</span><span class="hl-6">id</span><span class="hl-1">, </span><span class="hl-6">user</span><span class="hl-1">, []);</span><br/><br/><span class="hl-1">        </span><span class="hl-10">// Obtenemos los datos de los funkos del usuario</span><br/><span class="hl-1">        </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">readdirSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">user</span><span class="hl-1">).</span><span class="hl-8">forEach</span><span class="hl-1">(</span><span class="hl-6">funko</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">funkoFile</span><span class="hl-1"> = </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">readFileSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">user</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-6">funko</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">funkoJson</span><span class="hl-1"> = </span><span class="hl-4">JSON</span><span class="hl-1">.</span><span class="hl-8">parse</span><span class="hl-1">(</span><span class="hl-6">funkoFile</span><span class="hl-1">.</span><span class="hl-8">toString</span><span class="hl-1">());</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">newFunko</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">Funko</span><span class="hl-1">(</span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_id</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_name</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_description</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_type</span><span class="hl-1">, </span><br/><span class="hl-1">                </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_gender</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_franchise</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_number</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_exclusive</span><span class="hl-1">, </span><br/><span class="hl-1">                </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_specialCaracteristics</span><span class="hl-1">, </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_value</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">newUser</span><span class="hl-1">.</span><span class="hl-8">addFunko</span><span class="hl-1">(</span><span class="hl-6">newFunko</span><span class="hl-1">);</span><br/><span class="hl-1">        });</span><br/><br/><span class="hl-1">        </span><span class="hl-10">// Registramos al usuario en la lista de usuarios</span><br/><span class="hl-1">        </span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">push</span><span class="hl-1">(</span><span class="hl-6">newUser</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">id</span><span class="hl-1">++;</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li>Función <code>databaseSave()</code> para almacenar toda la información del sistema en la base de datos y sobreescribirla. Para ello se abre el directorio <code>./data</code>, y para cada usuario se comprueba primero si el fichero .json representativo de un funko sigue perteneciendo a la colección o no (es decir, se comprueba si el funko ha sido eliminado). En caso negativo se elimina el archivo usando <code>fs.rmSync()</code>. Posteriormente se crean nuevos ficheros correspondientes a los nuevos funkos añadidos, o se actualizan los ficheros en caso de que los funkos hayan sufrido modificaciones. Para ello se usa <code>fs.writeFileSync()</code>. Este procedimiento se repite para cada usuario registrado en el sistema:</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-8">databaseSave</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">forEach</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">readdirSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data&quot;</span><span class="hl-1">).</span><span class="hl-8">forEach</span><span class="hl-1">(</span><span class="hl-6">folder</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">folder</span><span class="hl-1"> == </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-10">// Si hay un archivo json de un funko que no esta en la lista se elimina el archivo.</span><br/><span class="hl-1">                </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">readdirSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1">).</span><span class="hl-8">forEach</span><span class="hl-1">(</span><span class="hl-6">funko</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">funkoFile</span><span class="hl-1"> = </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">readFileSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-6">funko</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">funkoJson</span><span class="hl-1"> = </span><span class="hl-4">JSON</span><span class="hl-1">.</span><span class="hl-8">parse</span><span class="hl-1">(</span><span class="hl-6">funkoFile</span><span class="hl-1">.</span><span class="hl-8">toString</span><span class="hl-1">());</span><br/><span class="hl-1">                    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">funkoCollection</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">col_funko</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">col_funko</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1"> == </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_id</span><span class="hl-1">) == </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                        </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">rmSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">folder</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-6">funkoJson</span><span class="hl-1">.</span><span class="hl-6">_id</span><span class="hl-1"> + </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                })</span><br/><span class="hl-1">                </span><span class="hl-10">// Se crean o actualizan los archivos json de los funkos que estan en la lista.</span><br/><span class="hl-1">                </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">funkoCollection</span><span class="hl-1">.</span><span class="hl-8">forEach</span><span class="hl-1">(</span><span class="hl-6">funko</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">writeFileSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">folder</span><span class="hl-1"> + </span><span class="hl-5">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-6">funko</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1"> + </span><span class="hl-5">&quot;.json&quot;</span><span class="hl-1">, </span><span class="hl-4">JSON</span><span class="hl-1">.</span><span class="hl-8">stringify</span><span class="hl-1">(</span><span class="hl-6">funko</span><span class="hl-1">));</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Por último se ha usado el paquete <strong>yargs</strong> para definir comandos que permitirán a un usuario realizar operaciones en el sistema. Los comandos implementados para esta práctica son los siguientes:</p>
<ul>
<li><code>adduser</code>: permite registrar un nuevo usuario al sistema. Se pide el nombre del usuario y se comprueba que el nombre no ha sido utilizado con anterioridad. En caso negarivo se crea el directorio correspondiente utilizando <code>mkdirSync()</code>:</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">    </span><span class="hl-8">databaseLoad</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">username</span><span class="hl-1">) == </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">newUser</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">OperableUser</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">username</span><span class="hl-1">, []);</span><br/><span class="hl-1">        </span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">push</span><span class="hl-1">(</span><span class="hl-6">newUser</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">fs</span><span class="hl-1">.</span><span class="hl-8">mkdirSync</span><span class="hl-1">(</span><span class="hl-5">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">username</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">green</span><span class="hl-1">(</span><span class="hl-5">&quot;Usuario creado correctamente.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Ya existe un usuario con ese nombre.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-8">databaseSave</span><span class="hl-1">();</span>
</code></pre>
<ul>
<li><code>add</code>: permite añadir un nuevo funko a la colección de un usuario. Se piden todos los atributos representativos del funko (a excepción de las características especiales que es opcional) además del nombre del usuario. Se comprueba si el usuario existe y se llama al método <code>addFunko()</code> de <code>OperableUser</code>. Por último se actualiza la base de datos:</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">    </span><span class="hl-8">databaseLoad</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">Types</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-6">newFunko</span><span class="hl-1">: </span><span class="hl-3">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">caract</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">newFunko</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">Funko</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">desc</span><span class="hl-1">, </span><span class="hl-6">type</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">gender</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">franchise</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">number</span><span class="hl-1">, </span><br/><span class="hl-1">            </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">exclusive</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">caract</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">value</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">newFunko</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">Funko</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">desc</span><span class="hl-1">, </span><span class="hl-6">type</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">gender</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">franchise</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">number</span><span class="hl-1">, </span><br/><span class="hl-1">            </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">exclusive</span><span class="hl-1">, </span><span class="hl-5">&quot;&quot;</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">value</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">) != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">)?.</span><span class="hl-8">addFunko</span><span class="hl-1">(</span><span class="hl-6">newFunko</span><span class="hl-1">) == </span><span class="hl-7">0</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">green</span><span class="hl-1">(</span><span class="hl-5">&quot;Funko añadido correctamente!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Ya existe un funko con esa ID.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Usuario no encontrado...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-8">databaseSave</span><span class="hl-1">();</span>
</code></pre>
<ul>
<li><code>edit</code>: permite editar un funko existente de la colección de un usuario. Se piden todos los atributos representativos del funko (a excepción de las características especiales que es opcional) además del nombre del usuario. Se comprueba si el usuario y el funko existen y se llama al método <code>modifyFunko()</code>. Por último se actualiza la base de datos:</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">    </span><span class="hl-8">databaseLoad</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">Types</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-6">newFunko</span><span class="hl-1">: </span><span class="hl-3">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">caract</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">newFunko</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">Funko</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">desc</span><span class="hl-1">, </span><span class="hl-6">type</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">gender</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">franchise</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">number</span><span class="hl-1">, </span><br/><span class="hl-1">            </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">exclusive</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">caract</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">value</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">newFunko</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-8">Funko</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">desc</span><span class="hl-1">, </span><span class="hl-6">type</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">gender</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">franchise</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">number</span><span class="hl-1">, </span><br/><span class="hl-1">            </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">exclusive</span><span class="hl-1">, </span><span class="hl-5">&quot;&quot;</span><span class="hl-1">, </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">value</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">) != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">)?.</span><span class="hl-8">modifyFunko</span><span class="hl-1">(</span><span class="hl-6">newFunko</span><span class="hl-1">) == </span><span class="hl-7">0</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">green</span><span class="hl-1">(</span><span class="hl-5">&quot;Funko modificado correctamente!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: No existe un funko con esa ID.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Usuario no encontrado...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-8">databaseSave</span><span class="hl-1">();</span>
</code></pre>
<ul>
<li><code>remove</code>: permite eliminar un funko de la colección de un usuario. Se pide el id del funko a eliminar y el nombre del usuario. Se comprueba si el usuario existe y se llama al método <code>removeFunko()</code>. Por último se actualiza la base de datos:</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">    </span><span class="hl-8">databaseLoad</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">) != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">)?.</span><span class="hl-8">deleteFunko</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">) == </span><span class="hl-7">0</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">green</span><span class="hl-1">(</span><span class="hl-5">&quot;Funko eliminado correctamente!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: No existe un funko con esa ID.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Usuario no encontrado...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-8">databaseSave</span><span class="hl-1">();</span>
</code></pre>
<ul>
<li><code>list</code>: permite listar todos los funkos de una colección de un usuario y mostrar toda la información correspondiente. Se pide el nombre del usuario y se comprueba si existe dentro del sistema. En caso positivo se llama al método <code>listFunko()</code>:</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">    </span><span class="hl-8">databaseLoad</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">) != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">)?.</span><span class="hl-8">listFunko</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Usuario no encontrado...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li><code>show</code>: permite mostrar la información de un funko de un usuario concreto. Se pide el nombre del usuario y el id del funko. Al igual que en el anterior caso, se comprueba que el usuario exista en el sistema y que el funko también exista. En caso positivo se llama al método <code>showFunkoInfo()</code>:</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">    </span><span class="hl-8">databaseLoad</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">) != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-6">userList</span><span class="hl-1">.</span><span class="hl-8">find</span><span class="hl-1">(</span><span class="hl-6">user</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1">.</span><span class="hl-6">name</span><span class="hl-1"> == </span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">user</span><span class="hl-1">)?.</span><span class="hl-8">showFunkoInfo</span><span class="hl-1">(</span><span class="hl-6">argv</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">) == -</span><span class="hl-7">1</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: No existe un funko con esa ID.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">log</span><span class="hl-1">(</span><span class="hl-6">chalk</span><span class="hl-1">.</span><span class="hl-8">red</span><span class="hl-1">(</span><span class="hl-5">&quot;ERROR: Usuario no encontrado...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span>
</code></pre>
<p>La forma de ejecutar el código y comprobar su funcionamiento es utilizando el siguiente comando:</p>
<pre><code><span class="hl-6">node</span><span class="hl-1"> </span><span class="hl-6">dist</span><span class="hl-1">/</span><span class="hl-6">funko_app</span><span class="hl-1">.</span><span class="hl-6">js</span><span class="hl-1"> &lt;</span><span class="hl-6">comando</span><span class="hl-1">&gt; &lt;</span><span class="hl-3">parámetros</span><span class="hl-1"> ...&gt;</span>
</code></pre>

<a href="#conclusión" id="conclusión" style="color: inherit; text-decoration: none;">
  <h2>Conclusión</h2>
</a>
<p>En conclusión, la práctica que hemos llevado a cabo ha sido beneficiosa por varias razones. En primer lugar, nos ha permitido aprender y familiarizarnos con dos paquetes muy populares de Node.js como lo son <strong>yargs</strong>, para crear interfaces de línea de comandos (CLI) de manera sencilla y eficiente  y <strong>chalk</strong> para dar color y estilo a los mensajes que imprimimos por consola, mejorando así la la legibilidad y el diseño de nuestras aplicaciones.</p>
<p>Además, esta práctica nos ha permitido profundizar en el funcionamiento de la <strong>API síncrona de Node.js</strong>. Aunque la tendencia actual es trabajar con código asíncrono en Node.js, conocer el funcionamiento de la API síncrona puede ser muy útil para casos en los que necesitamos realizar operaciones simples y no queremos hacer uso de callbacks, promesas o async/await.</p>

<a href="#referencias" id="referencias" style="color: inherit; text-decoration: none;">
  <h2>Referencias</h2>
</a>
<ol>
<li><a href="https://www.npmjs.com/package/yargs">yargs - npm</a></li>
<li><a href="https://www.npmjs.com/package/chalk">chalk - npm</a></li>
<li><a href="https://nodejs.org/docs/latest-v19.x/api/fs.html">File system | Node.js v19.8.1 Documentation</a></li>
</ol>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">ull-<wbr/>esit-<wbr/>inf-<wbr/>dsi-<wbr/>22-<wbr/>23-<wbr/>prct09-<wbr/>funko-<wbr/>app-<wbr/>juancarlosrey</a>
<ul>
<li class="tsd-kind-module"><a href="modules/funko.html">funko</a></li>
<li class="tsd-kind-module"><a href="modules/funko_app.html">funko_<wbr/>app</a></li>
<li class="tsd-kind-module"><a href="modules/operaciones_usuario.html">operaciones_<wbr/>usuario</a></li>
<li class="tsd-kind-module"><a href="modules/usuario.html">usuario</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>